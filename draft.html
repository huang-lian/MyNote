<!doctype html>
<html>
    <head>
	<title>UNIX 编程环境 - chapter3 Shell 的使用</title>
    </head>
    <body>
	<h1>Shell 的使用 </h1>
	<div>
	    <h2>命令行结构</h2>
	    <div>
		<div>
		    <ul>
			<li>最简单的命令就是一个词(world),通常是一个可执行文件名</li>
			<li>一条命令通常以换行符号结束，有时有分号<code>;</code>结束。但通常只有在键入回车后才可以开始执行命令。</li>
			<li>括号可以用来组合命令<code>(date;who)</code></li>
			<li><code>&amp;</code>也是一个命令结束符，ta告诉shell不必等待命令结束。通常，<code>&amp;</code>将一个需要长时间运行的命令放到后台，用户可以在此期间和shell继续交互。</li>
			<li>由shell解释的各种特殊字符，如<code>&amp;、&lt;、&gt;、|</code>不能用作在shell中程序的参数。相反，它们指示了shell运行这些程序的方式。</li>
		    </ul>
		</div>
		<h3>本节相关命令</h3>
		<div>
		    <ol>
			<li><code>tee</code>命令可以截取管道数据流并放到某个文件中，作用之一就是将中间结果保留在某个文件中。</li>
			<li><code>sleep</code>命令用来等待一段时间。</li>
			<li><code>pr</code>命令按照打印机显示文档。</li>
		    </ol>
		</div>
	    </div>
	    <h2>元字符</h2>
	    <div>
		<div>
		    <ul>
			<li>即shell中有特殊用途的字符</li>
			<li>如果希望原样使用元字符，可以如下使用
			    <ul>
				<li>使用单引号包括起来</li>
				<li>在每个元字符前使用转义符号<code>\</code>反斜杠。</li>
				<li>也可以使用双引号，但其中的<code>$,`...`</code>,以及 <code>\</code> 会生效</li>
			    </ul>
			</li>
		    </ul>
		</div>
		<h3>shell中的几个元字符</h3>
		<div></div>
	    </div>
	    <h2>创建新命令</h2>
	    <div>
		<div>
		    <ul>
			<li>即将已有的命令序列组织起来，放到脚本中，并添加到查找路径<code>$PATH</code>中</li>
			<li>如果不想每次都登录时手动设置<code>$PATH</code> 那么应该在.profile中设置。
		</div>
		<div></div>
	    </div>
	    <h2>命令参数</h2>
	    <div>
		<div>提供命令运行时需要的参数，比如命令选项和文件名</div>
		<div>
		    <ul>
			<li><code>$n</code>表示第n个参数。其中<code>$0</code>是命令本身程序名</li>
			<li><code>$*</code>表示全部参数。</li>
			<li><code>"$*"</code>中$*会被参数替代且作为一个参数传递给目标程序。</li>
			<li><code>grep&nbsp;-y</code>使得<code>grep</code>步区分大小写。</li>
		    </ul>
		</div>
	    </div>
	    <h2>程序输出作为参数</h2>
	    <div>
		<ul>
		    <li>任何程序的输出都可以放入命令行，只需要使用反引号将命令行括起来</li>
		</ul>
	    </div>
	    <div>
		<p>
		<code>pick</code>程序每次回送一个参数，并且在每个参数后等待响应，输出是响应为y的参数。
		</p>
	    </div>
	    <h2>Shell变量</h2>
	    <div>
		<ul>
		    <li>shell的内部命令<code>set</code>可以显示定义的所有变量值</li>
		    <li><code>echo $arg</code>可以显示变量<code>$arg</code>值</li>
		    <li>一个变量的值和创建它的shell有关，且不会自动传递给子shell</li>
		    <ul>
			<li>所以一个shell文件不能修改变量值，因为shell文件是由子shell运行的</li>
		    </ul>
		    <li>使用<code>.</code>执行一个命令，相当于shell标准输入定向到了该文件。</li>
		    <li>在子shell里设置变量的一个方法是在命令行的命令前显式给它赋值。（p65）。</li>
		    <li><code>export</code>可以继承父shell的变更值，（不能改变父shell变量值。</li>
		</ul>
	    </div>
	    <h2>进一步讨论I/O重定向</h2>
	    <div>
		<p>默认情况下，每个程序启动总是要建立三个文件。分别用名为"文件描述符"的小整数表示。标准输入输出分别用0和1表示。2表示表示标准错误输出。m&gt;n将m流合并到n流。
		<ul>
		    <li>shell提供了将命令的标准输入和命令放在一起（here document). 在文件命令行末尾使用<code>&gt;&gt;tags</code>表明信息从文件输入，知道出现终止词tags为止</li>	
		</ul>
		<a href="http://wx2.sinaimg.cn/mw690/006zpzJely1fw6jt6yxmuj30ku0hi76h.jpg">here docment 实例</a>
		</p>
	    </div>
	    <h2>Shell里面的循环</h2>
	    <p>即for i in [file_lists];do [command];done
	    <h2>bundle合并</h2>
	    <h2>为什么说shell是可编程的</h2>
	</div>
    </body>
</html>


